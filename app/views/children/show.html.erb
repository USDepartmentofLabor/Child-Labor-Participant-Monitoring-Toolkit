<div class="page-header">
  <%= link_to children_path, class: 'btn btn-default' do %>
  <%= fa_icon "caret-left" %>
  <%= t("general.back") %>
  <% end %>
  <%= link_to edit_child_path(@child), class: 'btn btn-primary' do %>
  <%= fa_icon "pencil" %>
  <%= t("general.edit") %>
  <% end %>
  <%= link_to child_timelines_path(@child), class: 'btn btn-primary' do %>
  <%= fa_icon "calendar" %>
  Timeline
  <% end %>
  <h1><%= t("children.show.title") %></h1>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="box box-primary">
      <div class="box-header with-border">
        <%= fa_icon "info" %>
        <h3 class="box-title">
          <%= t("children.show.personal_information") %>
        </h3>
      </div>
      <div class="box-body">
        <div class="row">
          <div class="col-md-3">
            <%= preview_avatar(@child, size: :small, class: "image-thumbnail") %>
          </div>
          <div class="col-md-9">
            <table class="table table-bordered table-hover table-listing">
              <tbody>
                <tr>
                  <th>ID</th>
                  <td><%= @child.id %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:fname) %></th>
                  <td><%= @child.fname %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:lname) %></th>
                  <td><%= @child.lname %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:mname) %></th>
                  <td><%= @child.mname %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:sex) %></th>
                  <td><%= @child.gender_name %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:dob) %></th>
                  <td><%= @child.dob %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:code) %></th>
                  <td><%= @child.code %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:intake_date) %></th>
                  <td><%= @child.intake_date %></td>
                </tr>
                <tr>
                  <td colspan="2"></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:address) %></th>
                  <td><%= @child.address %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:city) %></th>
                  <td><%= @child.city %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:state) %></th>
                  <td><%= @child.state %></td>
                </tr>
                <tr>
                  <th><%= Child.human_attribute_name(:country) %></th>
                  <td><%= @child.country_name %></td>
                </tr>
                <% @custom_fields.each do |custom_field| %>
                <tr>
                  <th><%= custom_field.name %></th>
                  <td><%= custom_field_value(custom_field) %></td>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <% if show_statuses_for @child %>
    <div class="box box-primary">
      <div class="box-header with-border">
        <%= t("children.show.statuses") %>
      </div>
      <div class="box-body">
        <%= render partial: "status", collection: @child_statuses %>
      </div>
    </div>
    <% end %>

    <div class="box box-primary">
      <div class="box-header with-border">
        <%= t("children.show.status_form_title") %>
      </div>
      <div class="box-body">
        <%= form_for([@child, ChildStatus.new], html: { role: "form" }) do |f| %>
        <%= render partial: 'status_form', locals: {f: f} %>
        <button type="submit" class="btn btn-primary"><%= t("general.submit") %></button>
        <% end %>
      </div>
    </div>

    <% if show_services_for @child %>
    <div class="box box-primary">
      <div class="box-header with-border">
        <%= t("children.show.services") %>
      </div>
      <div class="box-body">
        <%= render partial: "service", collection: @service_instances.order(:start_date) %>
      </div>
    </div>
    <% end %>

    <div class="box box-primary">
      <div class="box-header with-border">
        <%= t("children.show.service_form_title") %>
      </div>
      <div class="box-body">
        <%= form_for([@child, ServiceInstance.new], html: { role: "form" }) do |f| %>
        <%= render partial: 'service_form', locals: {f: f} %>
        <button type="submit" class="btn btn-primary"><%= t("general.submit") %></button>
        <% end %>
      </div>
    </div>
  </div>
</div>
