<div class="row">
  <div class="col-xs-12">

    <div class="page-header">
      <%= link_to households_path, class: 'btn btn-default' do %>
        <%= fa_icon "caret-left" %>
        <%= t("general.back") %>
      <% end %>
      <%= link_to edit_household_path(@household), class: 'btn btn-primary' do %>
        <%= fa_icon "pencil" %>
        <%= t("general.edit") %>
      <% end %>
    </div>

    <div class="box box-primary">
      <div class="box-header with-border">
        <%= fa_icon "info" %>
        <h3 class="box-title"><%= t("households.show.title") %></h3>
      </div>
      <div class="box-body no-padding">
        <dl>
          <dt><%= Household.human_attribute_name(:id) %></dt>
          <dd><%= @household.id %></dd>
          <dt><%= Household.human_attribute_name(:name) %></dt>
          <dd><%= @household.name %></dd>
          <dt><%= Household.human_attribute_name(:intake_date) %></dt>
          <dd><%= @household.intake_date %></dd>
          <% @section_1_custom_fields.each do |custom_field| %>
            <dt><%= custom_field.name %></dt>
            <dd>
              <% if custom_field_value(custom_field, @household.id).is_a? Array %>
                <%= custom_field_value(custom_field, @household.id).join(', ') %>
              <% else %>
                <%= custom_field_value(custom_field, @household.id) %>
              <% end %>
              <%= custom_field_other(custom_field, @household.id) %>
            </dd>
          <% end unless @section_1_custom_fields.nil? %>
        </dl>
      </div>
    </div>

    <%= render partial: 'custom_sections/custom_section_show',
      collection: @sections, locals: {model_id: @household.id} %>

    <div class="box box-primary">
      <div class="box-header with-border">
        <%= fa_icon "users" %>
        <h3 class="box-title">
          <%= Person.model_name.human.pluralize %>
        </div>
        <div class="box-body">
          <table id="people-data-table" class="table table-condensed table-striped">
            <thead>
              <tr>
                <th><%= Person.human_attribute_name(:id) %></th>
                <th><%= Person.human_attribute_name(:last_name) %></th>
                <th><%= Person.human_attribute_name(:first_name) %></th>
                <th><%= Person.human_attribute_name(:age) %></th>
                <th><%= Person.human_attribute_name(:sex) %></th>
                <th><%= Person.human_attribute_name(:intake_status) %></th>
              </tr>
            </thead>

            <tbody>
              <%= content_tag_for(:tr, @people.order(:id)) do |person| %>
                <td><%= link_to person.id, household_person_path(@household, person) %></td>
                <td><%= link_to person.last_name, household_person_path(@household, person) %></td>
                <td><%= person.first_name %></td>
                <td><%= person.age %></td>
                <td><%= person.gender_name %></td>
                <td><%= person.intake_status.work_status.name unless person.intake_status.nil? %></td>
                <% end %>
              </tbody>
            </table>
            <div class="row">
              <div class="col-md-12">
                <%= link_to t("households.index.add_member"), new_household_person_path(@household), class: "btn btn-primary" %>
              </div>
            </row>
          </div>
        </div>

      </div>

  </div>
</div>
